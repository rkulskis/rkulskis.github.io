import{r as e,u as L,f as S,a as O,P as $,L as K,j as t,m as R,b as B}from"./index-1nuhEb__.js";import{c as I,C as Q}from"./chevron-right-Dc2KfK0D.js";function z(){const i=e.useRef(!1);return L(()=>(i.current=!0,()=>{i.current=!1}),[]),i}function T(){const i=z(),[o,s]=e.useState(0),n=e.useCallback(()=>{i.current&&s(o+1)},[o]);return[e.useCallback(()=>S.postRender(n),[n]),o]}class U extends e.Component{getSnapshotBeforeUpdate(o){const s=this.props.childRef.current;if(s&&o.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function A({children:i,isPresent:o}){const s=e.useId(),n=e.useRef(null),p=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:d,height:h,top:u,left:b}=p.current;if(o||!n.current||!d||!h)return;n.current.dataset.motionPopId=s;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            top: ${u}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[o]),e.createElement(U,{isPresent:o,childRef:n,sizeRef:p},e.cloneElement(i,{ref:n}))}const k=({children:i,initial:o,isPresent:s,onExitComplete:n,custom:p,presenceAffectsLayout:d,mode:h})=>{const u=O(H),b=e.useId(),f=e.useMemo(()=>({id:b,initial:o,isPresent:s,custom:p,onExitComplete:a=>{u.set(a,!0);for(const r of u.values())if(!r)return;n&&n()},register:a=>(u.set(a,!1),()=>u.delete(a))}),d?void 0:[s]);return e.useMemo(()=>{u.forEach((a,r)=>u.set(r,!1))},[s]),e.useEffect(()=>{!s&&!u.size&&n&&n()},[s]),h==="popLayout"&&(i=e.createElement(A,{isPresent:s},i)),e.createElement($.Provider,{value:f},i)};function H(){return new Map}function _(i){return e.useEffect(()=>()=>i(),[])}const w=i=>i.key||"";function X(i,o){i.forEach(s=>{const n=w(s);o.set(n,s)})}function D(i){const o=[];return e.Children.forEach(i,s=>{e.isValidElement(s)&&o.push(s)}),o}const G=({children:i,custom:o,initial:s=!0,onExitComplete:n,exitBeforeEnter:p,presenceAffectsLayout:d=!0,mode:h="sync"})=>{const u=e.useContext(K).forceRender||T()[0],b=z(),f=D(i);let a=f;const r=e.useRef(new Map).current,y=e.useRef(a),g=e.useRef(new Map).current,C=e.useRef(!0);if(L(()=>{C.current=!1,X(f,g),y.current=a}),_(()=>{C.current=!0,g.clear(),r.clear()}),C.current)return e.createElement(e.Fragment,null,a.map(l=>e.createElement(k,{key:w(l),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:d,mode:h},l)));a=[...a];const v=y.current.map(w),m=f.map(w),x=v.length;for(let l=0;l<x;l++){const c=v[l];m.indexOf(c)===-1&&!r.has(c)&&r.set(c,void 0)}return h==="wait"&&r.size&&(a=[]),r.forEach((l,c)=>{if(m.indexOf(c)!==-1)return;const j=g.get(c);if(!j)return;const F=v.indexOf(c);let E=l;if(!E){const q=()=>{r.delete(c);const M=Array.from(g.keys()).filter(N=>!m.includes(N));if(M.forEach(N=>g.delete(N)),y.current=f.filter(N=>{const P=w(N);return P===c||M.includes(P)}),!r.size){if(b.current===!1)return;u(),n&&n()}};E=e.createElement(k,{key:w(j),isPresent:!1,onExitComplete:q,custom:o,presenceAffectsLayout:d,mode:h},j),r.set(c,E)}a.splice(F,0,E)}),a=a.map(l=>{const c=l.key;return r.has(c)?l:e.createElement(k,{key:w(l),isPresent:!0,presenceAffectsLayout:d,mode:h},l)}),e.createElement(e.Fragment,null,r.size?a:a.map(l=>e.cloneElement(l)))};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=I("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ee({onComplete:i,onSkip:o,categories:s}){const[n,p]=e.useState([]),[d,h]=e.useState(0),[u,b]=e.useState({}),[f,a]=e.useState(!0);e.useEffect(()=>{async function m(){try{const x=await B.fetchQuestionnaire();p(x)}catch(x){console.error("Failed to load questionnaire:",x)}finally{a(!1)}}m()},[]);const r=n[d],y=s.find(m=>m.id===(r==null?void 0:r.category)),g=(d+1)/n.length*100,C=m=>{if(b(x=>({...x,[r.axiomId]:m})),d<n.length-1)h(x=>x+1);else{const x=Object.entries(u).filter(([c,j])=>j).map(([c])=>c),l=Object.entries(u).filter(([c,j])=>!j).map(([c])=>c);r.axiomId&&(m?x.push(r.axiomId):l.push(r.axiomId)),i(x,l)}},v=()=>{d>0&&h(m=>m-1)};return f?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading philosophical axioms..."})]})}):r?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsxs("div",{className:"max-w-2xl w-full",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"PhilsAxioms"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Build your philosophical framework by answering these foundational questions"}),t.jsx("button",{onClick:o,className:"text-indigo-600 hover:text-indigo-800 underline text-sm",children:"Skip questionnaire and explore all axioms â†’"})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[t.jsxs("span",{children:["Question ",d+1," of ",n.length]}),t.jsxs("span",{children:[Math.round(g),"% complete"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx(R.div,{className:"bg-indigo-600 h-2 rounded-full",initial:{width:0},animate:{width:`${g}%`},transition:{duration:.3}})})]}),t.jsx(G,{mode:"wait",children:t.jsxs(R.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"bg-white rounded-xl shadow-xl p-8",children:[y&&t.jsx("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium text-white mb-4",style:{backgroundColor:y.color},children:y.name}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:r.question}),r.explanation&&t.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:r.explanation}),t.jsxs("div",{className:"flex gap-4 mb-6",children:[t.jsxs(R.button,{onClick:()=>C(!0),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx(V,{className:"w-5 h-5"}),"Yes, I accept this"]}),t.jsxs(R.button,{onClick:()=>C(!1),className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-4 px-6 rounded-lg flex items-center justify-center gap-2 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[t.jsx(Y,{className:"w-5 h-5"}),"No, I reject this"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("button",{onClick:v,disabled:d===0,className:"flex items-center gap-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(W,{className:"w-4 h-4"}),"Previous"]}),t.jsxs("span",{className:"text-gray-400",children:[d<n.length-1?"Continue":"Finish",t.jsx(Q,{className:"w-4 h-4 inline ml-1"})]})]})]},d)})]})}):t.jsx("div",{children:"Error loading questionnaire"})}export{ee as default};
